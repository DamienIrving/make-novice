<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>Software Carpentry: Automation and Make</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <link rel="alternate" type="application/rss+xml" title="Software Carpentry Blog" href="http://software-carpentry.org/feed.xml"/>
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body class="lesson">
    <div class="container card">
      <div class="banner">
        <a href="http://software-carpentry.org" title="Software Carpentry">
          <img alt="Software Carpentry banner" src="img/software-carpentry-banner.png" />
        </a>
      </div>
      <article>
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
                    <a href="index.html"><h1 class="title">Automation and Make</h1></a>
          <h2 class="subtitle">Conclusion</h2>
          <section class="objectives panel panel-warning">
<div class="panel-heading">
<h2 id="learning-objectives"><span class="glyphicon glyphicon-certificate"></span>Learning Objectives</h2>
</div>
<div class="panel-body">
<ul>
<li>Advantages of automated build tools such as Make.</li>
</ul>
</div>
</section>
<p>Automated build tools such as Make can help us in a number of ways. They help us to automate repetitive commands and, so, save us time and reduce the risk of us making errors we might make if running these commands manually.</p>
<p>They can also save time by ensuring that automatically-generated artefacts (such as data files or plots) are only recreated when the files that were used to create these have changed in some way.</p>
<p>Through their notion of targets, dependencies and actions they serve as a form of documentation, recording dependencies between code, scripts, tools, configurations, raw data, derived data, plots and papers.</p>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="extend-the-makefile-to-create-pngs"><span class="glyphicon glyphicon-pencil"></span>Extend the Makefile to create PNGs</h2>
</div>
<div class="panel-body">
<p>Add new rules, update existing rules, and add new macros to:</p>
<ul>
<li>Create <code>.png</code> files from <code>.dat</code> files using <code>plotcount.py</code>.</li>
<li>Add the <code>zip_test.py</code> script as dependency of the <code>results.txt</code> file</li>
<li>Remove all auto-generated files (<code>.dat</code>, <code>.png</code>, <code>results.txt</code>).</li>
</ul>
<p>Finally, many Makefiles define a default <a href="reference.html#phony-target">phony target</a> called <code>all</code> as first target, that will build what the Makefile has been written to build (e.g. in our case, the <code>.png</code> files and the <code>results.txt</code> file). As others may assume your Makefile confirms to convention and supports an <code>all</code> target, add an <code>all</code> target to your Makefile (Hint: this rule has the <code>results.txt</code> file and the <code>.png</code> files as dependencies, but no actions). With that in place, instead of running <code>make results.txt</code>, you should now run <code>make all</code>, or just simply <code>make</code>. By default, <code>make</code> runs the first target it finds in the Makefile, in this case your new <code>all</code> target.</p>
</div>
</section>
<p>The following figure shows the dependencies involved in building the <code>all</code> target, once we’ve added support for images:</p>
<div class="figure">
<img src="img/09-conclusion-challenge.png" title="results.txt dependencies once images have been added" alt="results.txt dependencies once images have been added" />
<p class="caption">results.txt dependencies once images have been added</p>
</div>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="extend-the-makefile-to-create-an-archive-of-code-data-plots-and-zipf-summary-table"><span class="glyphicon glyphicon-pencil"></span>Extend the Makefile to create an archive of code, data, plots and Zipf summary table</h2>
</div>
<div class="panel-body">
<p>Add new rules, update existing rules, and add new macros to:</p>
<ul>
<li>Define the name of a directory, <code>zipf_analysis</code>, to hold all our code, data, plots and the Zipf summary table.</li>
<li>Copy all our code, data, plots and the Zipf summary table to this directory.</li>
<li>Create an archive, <code>zipf_analysis.tar.gz</code>, of this directory. The bash command <code>tar</code> can be used, as follows:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">tar</span> -czf zipf_analysis.tar.gz zipf_analysis</code></pre></div>
<ul>
<li>Update <code>all</code> to create <code>zipf_analysis.tar.gz</code>.</li>
<li>Remove <code>zipf_analysis</code> and <code>zipf_analysis.tar.gz</code> when <code>make   clean</code> is called.</li>
<li>Print the values of any additional variables you have defined when <code>make variables</code> is called.</li>
</ul>
</div>
</section>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="adding-the-makefile-to-our-archive"><span class="glyphicon glyphicon-pencil"></span>Adding the Makefile to our archive</h2>
</div>
<div class="panel-body">
<p>Why do we add the Makefile to our archive of code, data, plots and Zipf summary table?</p>
</div>
</section>
        </div>
      </div>
      </article>
      <div class="footer">
        <a class="label swc-blue-bg" href="http://software-carpentry.org">Software Carpentry</a>
        <a class="label swc-blue-bg" href="https://github.com/swcarpentry/make-novice">Source</a>
        <a class="label swc-blue-bg" href="mailto:admin@software-carpentry.org">Contact</a>
        <a class="label swc-blue-bg" href="LICENSE.html">License</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="http://software-carpentry.org/v5/js/jquery-1.9.1.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-37305346-2', 'auto');
      ga('send', 'pageview');
    
    </script>
  </body>
</html>
